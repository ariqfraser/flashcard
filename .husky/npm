#!/usr/bin/env sh
# .husky/npm - small shim to ensure npm is available for husky hooks
# It tries to load nvm, then falls back to common system locations.

NVM_DIR="$HOME/.nvm"
if [ -s "$NVM_DIR/nvm.sh" ]; then
  # shellcheck source=/dev/null
  . "$NVM_DIR/nvm.sh"
fi

if command -v npm >/dev/null 2>&1; then
  exec npm "$@"
fi

# try common Homebrew locations (Apple Silicon and Intel)
for prefix in "/opt/homebrew/bin" "/usr/local/bin"; do
  if [ -x "$prefix/npm" ]; then
    exec "$prefix/npm" "$@"
  fi
done

echo "npm not found. Please install Node or launch VS Code from a shell that loads nvm (e.g. run 'code .' from your terminal)." >&2
exit 1
